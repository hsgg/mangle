<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
 "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>
<head>
  <title>mangle : manual : commands</title>
  <meta http-equiv="Content-Type" content="text/html">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="description"
  content="mangle: a code to compute the spherical harmonics of an arbitrary angular mask.">
  <meta name="keywords"
  content="mangle, spherical harmonics, Large Scale Structure, Cosmic Microwave Background">
  <link href="../style/mangle_template.css" rel="stylesheet" type="text/css">
  
</head>
<body>

<div class="main">

<div class="title">
</div>

<div class="nav clear">

<ul class="menu centered">
    <li><a href="../">Overview</a></li>
    <li><a href="../download/">Download</a></li>
    <li><a href="../quickstart/">QuickStart</a></li>
    <li><a href="./">Manual</a></li>
    <li><a href="../references/">References</a></li>
</ul>

</div>

<br>

<div class="pagetitlebox">
<div class="pagetitle">
<img src="./manual.png" alt="manual">
</div>
<div class="pagesubtitle">
<h5>Commands</h5><!--img src="./commands.png" alt="commands" style="margin-left: 182.5px;"-->
</div>
</div>

<div class="contentbox">
<div class="submenu" style="width: 153px;">
<ul>
    <li><a href="./">Terms</a></li>
    <li><a href="./commands.html">Commands</a></li>
    <li><a href="./polyformat.html">Polygon Formats</a></li>
    <li class="last"><a href="./troubleshooting.html">Troubleshooting</a></li>
</ul>
</div>
<div class="content">
<p style="margin-left: 193px;"><br></p>
<h2>poly2poly</h2>
<p style="margin-left: 193px;">

<tt>poly2poly</tt>
converts a polygon file from one format to another.
The different formats are described in
<a href="./polyformat.html">Polygon Formats</a>.
<br><br>
<tt>
poly2poly [-d] [-q] [-m&lt;a&gt;[u]] [-j[&lt;min&gt;][,&lt;max&gt;]] [-J[&lt;min&gt;][,&lt;max&gt;]] [-k[&lt;min&gt;][,&lt;max&gt;]] [-K[&lt;min&gt;][,&lt;max&gt;]] [-n] [-s&lt;n&gt;] [-e&lt;n&gt;] [-vo|-vn|-vp]
[-p[+|-]&lt;n&gt;] [-i&lt;f&gt;[&lt;n&gt;][u]] [-o&lt;f&gt;[u]] polygon_infile1 [polygon_infile2 ...] polygon_outfile
</tt>
<br><br>
The default output format is <a href="./polygon.html"><tt>polygon</tt></a> format.
Thus both
</p>
<p style="margin-left: 233px;">
<tt>
	poly2poly polygon_infile polygon_outfile
</tt>
</p>
<p style="margin-left: 193px;">
and
</p>
<p style="margin-left: 233px;">
<tt>
	poly2poly -op polygon_infile polygon_outfile
</tt>
</p>
<p style="margin-left: 193px;">
have the same effect of converting polygons in the <tt>polygon_infile</tt>
to an output polygon file <tt>polygon_outfile</tt>
written in <tt>polygon</tt> format.

<!--
<p>
The command
<pre>
	poly2poly -oc polygon_infile polygon_outfile
</pre>
reads polygons from polygon file <tt>polygon_infile</tt>,
converts them to
<a href="./circle.html"><tt>circle</tt></a> format,
and writes them to polygon file <tt>polygon_outfile</tt>.

<p>
Similarly
<pre>
	poly2poly -ov polygon_infile polygon_outfile
</pre>
reads polygons from polygon file <tt>polygon_infile</tt>,
and writes them in <a href="./vertices.html"><tt>vertices</tt></a> format
to <tt>outfile</tt>.
In general the vertices of a polygon do <em>not</em>
completely specify the polygon.
Note that a polygon with zero or one caps has no vertices.
More generally, a polygon whose caps nowhere intersect
has no vertices.

<p>
The <a href="./edges.html"><tt>edges</tt></a> format
provides a file of points suitable for plotting polygons.
The command
<pre>
	poly2poly -oe polygon_infile polygon_outfile
</pre>
produces a polygon file containing 2 points per edge of each polygon.
If you want more detail,
<pre>
	poly2poly -oe&lt;n&gt; polygon_infile polygon_outfile
</pre>
produces a file with <tt>&lt;n&gt;</tt> points per edge of each polygon.
The polygons in the middle panel of the 2QZ&#160;10k mask illustrated at
<a href="#top">the top of this page</a>
were drawn from a polygon file created with
<pre>
	poly2poly -oe6 ...
</pre>
giving 6 points per edge.
-->

<br><br>
One particularly useful output format is
the <a href="./graphics.html"><tt>graphics</tt></a> format.
The command
</p>
<p style="margin-left: 233px;">
<tt>
	poly2poly -og&lt;n&gt; polygon_infile polygon_outfile
</tt>
</p>
<p style="margin-left: 193px;">
produces a polygon file containing <tt>&lt;n&gt;</tt> points per (2&#160;pi)
along each edge of each polygon.
<br><br>
Not all polygons are rectangles.
The command
</p>
<p style="margin-left: 233px;">
<tt>
	poly2poly -or polygon_infile polygon_outfile
</tt>
</p>
<p style="margin-left: 193px;">
reads polygons from polygon file <tt>polygon_infile</tt>,
identifies which of the polygons are rectangles
(polygons bounded by lines of constant azimuth and elevation),
and writes the surviving polygons in
<a href="./rectangle.html"><tt>rectangle</tt></a> format
to <tt>outfile</tt>.
Polygons that are not rectangles are discarded.
<br><br>
If conversion with
<tt>poly2poly</tt>
produces lots of errors,
chances are it's because the input polygon file needs snapping.
Use <tt>snap</tt> instead.
For example,
<tt>poly2poly</tt>
will often fail
if the input file is in
<a href="./edges.html"><tt>edges</tt></a>
<tt>edges</tt>
format,
even if that input file was created from a <tt>snap</tt>'d polygon file,
because the <tt>edges</tt> format discards information about
two edges coming from the same cap.
<br><br>
By default
<tt>poly2poly</tt>
retains the polygon id numbers found in the input polygon file(s),
unlike the
<tt>balkanize</tt>
and
<tt>unify</tt>
commands.
If you want
<tt>poly2poly</tt>
to stamp the polygons in the output file with
a new set of sequential polygon id numbers
(perhaps because the input polygon file contained no polygon id numbers),
then use the <tt>-vn</tt> switch.
<br><br>
<tt>poly2poly</tt> offers the following optional parameters:
</p>
<p style="margin-left: 233px;">
<tt>
	poly2poly -j[&lt;min&gt;][,&lt;max&gt;] -k[&lt;min&gt;][,&lt;max&gt;] -n -vo|-vn|-vp -p[+|-]&lt;n&gt; ...
</tt>
</p>

<a name="poly2polytable"></a>
<table bgcolor="#f6eecc" cellpadding=2 border=0 style="margin-left: 193px;">
<tr><td>
<table cellspacing=2 cellpadding=4 border=1>

<tr><td valign=top>
<tt>-j&lt;min&gt;,&lt;max&gt;</tt>
</td><td>
If
<tt>&lt;min&gt;</tt> is less than or equal to <tt>&lt;max&gt;</tt>,
then only polygons with weights
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">and</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with weights in the interval
[<tt>&lt;min&gt;,&lt;max&gt;</tt>],
are to be retained.
<p>
If
<tt>&lt;min&gt;</tt> is greater than <tt>&lt;max&gt;</tt>,
then only polygons with weights
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">or</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with weights outside the interval
(<tt>&lt;max&gt;,&lt;min&gt;</tt>),
are to be retained.
<p>
The defaults are that there is no minimum or maximum weight.
</td></tr>

<tr><td valign=top>
<tt>-j&lt;min&gt;</tt>

</td><td>
Only polygons with weights greater than or equal to
<tt>&lt;min&gt;</tt> are to be retained.
</td></tr>

<tr><td valign=top>
<tt>-j,&lt;max&gt;</tt>
(with a comma before <tt>&lt;max&gt;</tt>)
</td><td>
Only polygons with weights less than or equal to
<tt>&lt;max&gt;</tt> are to be retained.

</td></tr>

<tr><td valign=top>
<tt>-J&lt;min&gt;,&lt;max&gt;</tt>
</td><td>
If
<tt>&lt;min&gt;</tt> is less than or equal to <tt>&lt;max&gt;</tt>,
then only polygons with id numbers
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">and</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with id numbers in the interval
[<tt>&lt;min&gt;,&lt;max&gt;</tt>],
are to be retained.
<p>
If
<tt>&lt;min&gt;</tt> is greater than <tt>&lt;max&gt;</tt>,
then only polygons with id numbers
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">or</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with id numbers outside the interval
(<tt>&lt;max&gt;,&lt;min&gt;</tt>),
are to be retained.
<p>
The defaults are that there is no minimum or maximum id number.
</td></tr>

<tr><td valign=top>
<tt>-J&lt;min&gt;</tt>

</td><td>
Only polygons with id numbers greater than or equal to
<tt>&lt;min&gt;</tt> are to be retained.
</td></tr>

<tr><td valign=top>
<tt>-J,&lt;max&gt;</tt>
(with a comma before <tt>&lt;max&gt;</tt>)
</td><td>
Only polygons with id numbers less than or equal to
<tt>&lt;max&gt;</tt> are to be retained.

</td></tr>


<tr><td valign=top>
<tt>-k&lt;min&gt;,&lt;max&gt;</tt>
</td><td>
If
<tt>&lt;min&gt;</tt> is less than or equal to <tt>&lt;max&gt;</tt>,
then only polygons with areas
greater than or equal to
<tt>&lt;min&gt;</tt>

steradians
<font color="#ff0000">and</font>
less than or equal to
<tt>&lt;max&gt;</tt>
steradians,
i.e. with areas in the interval
[<tt>&lt;min&gt;,&lt;max&gt;</tt>]
steradians,
are to be retained.
<p>
If
<tt>&lt;min&gt;</tt> is greater than <tt>&lt;max&gt;</tt>,
then only polygons with areas
greater than or equal to

<tt>&lt;min&gt;</tt>
steradians
<font color="#ff0000">or</font>
less than or equal to
<tt>&lt;max&gt;</tt>
steradians,
i.e. with areas outside the interval
(<tt>&lt;max&gt;,&lt;min&gt;</tt>)
steradians,
are to be retained.
<p>
The defaults are that there is no minimum or maximum area.
</td></tr>

<tr><td valign=top>
<tt>-k&lt;min&gt;</tt>
</td><td>
Only polygons with areas greater than or equal to
<tt>&lt;min&gt;</tt>
steradians
are to be retained.
</td></tr>

<tr><td valign=top>
<tt>-k,&lt;max&gt;</tt>
(with a comma before <tt>&lt;max&gt;</tt>)

</td><td>
Only polygons with areas less than or equal to
<tt>&lt;max&gt;</tt>
steradians
are to be retained.
</td></tr>

<tr><td valign=top>
<tt>-K&lt;min&gt;,&lt;max&gt;</tt>
</td><td>
If
<tt>&lt;min&gt;</tt> is less than or equal to <tt>&lt;max&gt;</tt>,
then only polygons with pixel numbers
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">and</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with pixel numbers in the interval
[<tt>&lt;min&gt;,&lt;max&gt;</tt>],
are to be retained.
<p>
If
<tt>&lt;min&gt;</tt> is greater than <tt>&lt;max&gt;</tt>,
then only polygons with pixel numbers
greater than or equal to

<tt>&lt;min&gt;</tt>
<font color="#ff0000">or</font>
less than or equal to
<tt>&lt;max&gt;</tt>,
i.e. with pixel numbers outside the interval
(<tt>&lt;max&gt;,&lt;min&gt;</tt>),
are to be retained.
<p>
The defaults are that there is no minimum or maximum pixel number.
</td></tr>

<tr><td valign=top>
<tt>-K&lt;min&gt;</tt>

</td><td>
Only polygons with pixel numbers greater than or equal to
<tt>&lt;min&gt;</tt> are to be retained.
</td></tr>

<tr><td valign=top>
<tt>-K,&lt;max&gt;</tt>
(with a comma before <tt>&lt;max&gt;</tt>)
</td><td>
Only polygons with pixel numbers less than or equal to
<tt>&lt;max&gt;</tt> are to be retained.

</td></tr>

<tr><td valign=top>
<tt>-n</tt>
</td><td>
Polygons read from <tt>polygon_infile1</tt> are to be intersected
with polygons with the same id number from <tt>polygon_infile2</tt> and subsequent <tt>polygon_infiles</tt>.

<p>
For example,
if <tt>polygon_infile1</tt> contains a polygon with id number 12,
and <tt>polygon_infile2</tt> contains a polygon with id number 12,
then the polygon 12 written to the outfile will be the intersection
of the two polygons.
In this example, if <tt>polygon_infile2</tt> contains no polygon 12,
then the polygon 12 written to the outfile will be
the original polygon 12 from <tt>polygon_infile1</tt>.
If <tt>polygon_infile2</tt> contains two or more polygons with the same id number 12,
then the polygon 12 written to the outfile will be the
intersection of polygon 12 from <tt>polygon_infile1</tt> with all polygons numbered 12
in <tt>polygon_infile2</tt>.

</td></tr>

<tr><td valign=top>
<tt>-vo</tt>
<p>
<tt>-vn</tt>
<p>
<tt>-vp</tt>
</td><td>
<tt>-vo</tt> means apply <tt>o</tt>ld polygon id numbers, as found in the input
polygon files, to output polygons.
<br>
This is the default for
<tt>pixelize</tt>,
<tt>snap</tt>,
<tt>weight</tt>,
<tt>poly2poly</tt>,
and
<tt>polyid</tt>.
<p>
<tt>-vn</tt> means apply <tt>n</tt>ew polygon id numbers to output polygons.
Here output polygons are renumbered sequentially.
<br>
This is the default for
<tt>balkanize</tt>
and
<tt>unify</tt>.
<p>
<tt>-vp</tt> means apply the <tt>p</tt>ixel number for each polygon as the id number for the output polygons.
<br>
This is the default for
<tt>pixelmap</tt>.

</td></tr>

<tr><td valign=top>
<tt>-p[+|-]&lt;n&gt;</tt>
</td><td>
Write angles to the outfile with
<tt>&lt;n&gt;</tt>
digits after the decimal point.
<p>
The optional <tt>+</tt> (default) prefix
sets output azimuths in the interval
[0, 2 pi);
the optional <tt>-</tt> prefix
sets output azimuths in the interval
(&minus;pi, pi].

</td></tr>

</table>
</td></tr>
</table>

<p style="margin-left: 193px;">
Back to <a href="./commands.html">list of commands</a>.
</p>

</div>
</div>

<div class="footer">
<a href="http://www.colorado.edu"><div class="footerleft">
<img src="../CU.jpg" alt="CU">
</div>
</a>
<a href="http://space.mit.edu"><div class="footerright2">
<img src="../mki.jpg" alt="MKI">
</div>
</a>
<a href="http://web.mit.edu"><div class="footerright1">
<img src="../mit.gif" alt="MIT">
</div>
</a>
</div>

</div>
</body>
</html>

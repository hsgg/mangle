<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
 "http://www.w3.org/TR/REC-html40/loose.dtd">

<html>
<head>
  <title>mangle : manual : commands</title>
  <meta http-equiv="Content-Type" content="text/html">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="description"
  content="mangle: a code to compute the spherical harmonics of an arbitrary angular mask.">
  <meta name="keywords"
  content="mangle, spherical harmonics, Large Scale Structure, Cosmic Microwave Background">
  <link href="../style/mangle_template.css" rel="stylesheet" type="text/css">
  
</head>
<body>

<div class="main">

<div class="title">
</div>

<div class="nav clear">

<ul class="menu centered">
    <li><a href="../">Overview</a></li>
    <li><a href="../download/">Download</a></li>
    <li><a href="../quickstart/">QuickStart</a></li>
    <li><a href="./">Manual</a></li>
    <li><a href="../references/">References</a></li>
</ul>

</div>

<br>

<div class="pagetitlebox">
<div class="pagetitle">
<img src="./manual.png" alt="manual">
</div>
<div class="pagesubtitle">
<h5>Commands</h5><!--img src="./commands.png" alt="commands" style="margin-left: 182.5px;"-->
</div>
</div>

<div class="contentbox">
<div class="submenu" style="width: 153px;">
<ul>
    <li><a href="./">Terms</a></li>
    <li><a href="./commands.html">Commands</a></li>
    <li><a href="./polyformat.html">Polygon Formats</a></li>
    <li class="last"><a href="./troubleshooting.html">Troubleshooting</a></li>
</ul>
</div>
<div class="content">
<p style="margin-left: 193px;"><br></p>
<h2>balkanize</h2>
<p style="margin-left: 193px;">
<tt>balkanize</tt>
subdivides the angular mask into many disjoint polygons.
<br><br>
<tt>
balkanize [-d] [-q] [-a&lt;a&gt;[u]] [-b&lt;a&gt;[u]] [-t&lt;a&gt;[u]] [-y&lt;r&gt;]  [-m&lt;a&gt;[u]] [-s&lt;n&gt;] [-e&lt;n&gt;] [-vo|-vn|-vp]
[-p[+|-]&lt;n&gt;] [-B&lt;bmethod&gt;] [-i&lt;f&gt;[&lt;n&gt;][u]] [-o&lt;f&gt;[u]] polygon_infile1 [polygon_infile2 ...] polygon_outfile
</tt>
<br><br>
The idea for this routine emerged in a phone conversation with Max Tegmark,
who spontaneously invented the name.
Balkanization fragments an input set of possibly overlapping polygons
into many non-overlapping connected polygons.
The process involves two successive stages:</p>
<ul style="list-style-type: none; margin-left: 193px;">
    <li>Stage 1: Fragment the polygons into non-overlapping polygons, some of which may be disconnected.</li>
    <li>Stage 2: Identify disconnected polygons and subdivide them into connected parts.</li>
</ul>
<p style="margin-left: 193px;">
The algorithm for the first stage is simple and pretty:</p>
<ul style="list-style-type: lower-alpha; margin-left: 193px; padding-left: 62px;">
    <li>Is the intersection of two polygons
        neither empty nor equal to the first polygon?
        If so, find a circle, a cap boundary, of the second polygon
        that divides the first polygon,
        and split the first polygon into two along that circle.</li>
    <li>Iterate.</li>
</ul>
<p style="margin-left: 193px;">
Notice that only one of the two parts of the split polygon
overlaps the second polygon,
and that only the overlapping part needs iterating.
For any pair of polygons,
iteration ceases when the overlapping part lies entirely inside the second
polygon.
The final overlapping part is equal to the intersection of the original
first polygon with the second polygon.
All other fragments of the first polygon lie outside the second polygon.
<br><br>
Stage one of the balkanization procedure yields polygons
that can contain two or more disconnected parts, as illustrated below.
Stage two subdivides such disconnected polygons into connected parts
by computing the connected boundaries of the polygon,
and lassoing each connected boundary with an extra cap.</p>
<center>
<table border=0 style="margin-left: 143px;">
<tr><td align=center valign=bottom>
<img src="discpol.gif" width=64 height=64 hspace=4 vspace=4
alt="A polygon that contains two disconnected parts">
</td></tr>
<tr><td valign=top>

A polygon that contains two disconnected parts.
</td></tr>
</table>
</center>

<p style="margin-left: 193px;">
Polygons can have intricate multiply-connected shapes,
with many disconnected parts, each punctuated with many holes.
<tt>mangle</tt>
is designed to deal with almost any polygon you can throw at it,
though it could fail on a polygon whose vertices are arranged
in a sufficiently complex fractal pattern.
If <tt>mangle</tt> fails on a polygon, it is a bug;
please email the <a href="../references/index.html#contact">mangle development team</a>.
</p>

<center>
<table border=0 style="margin-left: 123px;">

<tr>

<td valign=middle>
<table border = 0>
<tr><td align=center valign=bottom>
<img src="batman.gif" width=142 height=52 hspace=4 vspace=4
alt="Approximation of Batman logo">
</td></tr>
<tr><td align=center valign=top>
A non-simply-connected polygon.

</td></tr>
</table>
</td>

<td valign=middle>
<table border = 0>
<tr><td align=center valign=bottom>
<img src="fractal.gif" width=204 height=200 hspace=4 vspace=4
alt="Fractal">
</td></tr>
<tr><td align=center valign=top>
A multiply-connected polygon<br>
containing 7 parts<br>
bounded by 13 boundaries.

</font>
</td></tr>
</table>
</td>

</tr>

</table>
</center>

<p style="margin-left: 193px;">
To complete its task,
<tt>balkanize</tt>
snaps the edges of each balkanized polygon,
prunes redundant edges,
and discards polygons with zero area.
</p>

<h2>weights in balkanize</h2>
<p style="margin-left: 193px;">
The default rule used by <tt>balkanize</tt> is that the weight of a polygon that appears later in the input file overrides weights of earlier polygons. In other words, if balkanize finds that two polygons intersect, then the weight applied to the intersection is the weight of the later polygon. The non-intersecting parts of the polygons inherit the weights of their parents.  (See <a href="./weight.html">weight</a> for more details.)
<br>
To use a different rule, the <tt>-B</tt> switch can be used. The different rules that can be specified are as follows:
<br><br>
<tt>-Bl</tt> (default) takes later weight in the input polygon file as described above.<br>
<tt>-Ba</tt> adds the weights of overlapping polygons together.<br>
<tt>-Bn</tt> takes the minimum weight from the set of overlapping polygons.<br>
<tt>-Bx</tt> takes the maximum weight from the set of overlapping polygons.<br>
  


<br><br>
Back to <a href="./commands.html">list of commands</a>.
</p>

</div>
</div>

<div class="footer">
<a href="http://www.colorado.edu"><div class="footerleft">
<img src="../CU.jpg" alt="CU">
</div>
</a>
<a href="http://space.mit.edu"><div class="footerright2">
<img src="../mki.jpg" alt="MKI">
</div>
</a>
<a href="http://web.mit.edu"><div class="footerright1">
<img src="../mit.gif" alt="MIT">
</div>
</a>
</div>

</div>
</body>
</html>
